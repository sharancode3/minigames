<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Monkey Typing</title>
<style>
 body{margin:0;font-family:Inter,system-ui;background:#040010;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:20px}
 .area{max-width:760px;width:100%;background:linear-gradient(135deg,#0b0418,#140022);border:1px solid rgba(255,255,255,.07);padding:28px 30px;border-radius:26px;box-shadow:0 30px 80px rgba(0,0,0,.7);display:flex;flex-direction:column;gap:22px}
 h1{margin:0;font-size:1.8rem;background:linear-gradient(90deg,#ff004d,#ff7a18,#00f0ff);-webkit-background-clip:text;background-clip:text;color:transparent}
 #text{line-height:1.7;font-size:1.15rem;letter-spacing:.5px}
 #text span{padding:2px 1px;border-radius:4px}
 #text span.active{background:#222a45}
 #text span.correct{color:#4ade80}
 #text span.incorrect{color:#ff2d55;text-decoration:underline}
 .stats{display:flex;flex-wrap:wrap;gap:18px;font-size:.9rem}
 .stat{background:rgba(255,255,255,.04);padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.06);min-width:120px}
 .controls{display:flex;gap:12px;flex-wrap:wrap}
 button{padding:10px 18px;border-radius:14px;border:0;font-weight:700;background:linear-gradient(135deg,#7c3aed,#ff004d);color:#fff;cursor:pointer}
 button.secondary{background:transparent;border:1px solid rgba(255,255,255,.2)}
 #overlay{position:fixed;inset:0;background:rgba(14,0,30,.8);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;flex-direction:column;gap:16px;font-size:2rem;font-weight:800}
 #overlay.show{display:flex}
</style>
</head>
<body>
 <div class="area">
  <h1>üêí Monkey Typing Trainer</h1>
  <div id="text"></div>
  <input id="input" placeholder="Start typing here..." autocomplete="off" style="padding:14px 16px;border-radius:14px;border:1px solid rgba(255,255,255,.12);background:#090013;color:#fff;font-size:1rem" />
  <div class="stats">
    <div class="stat" id="wpm">WPM: 0</div>
    <div class="stat" id="accuracy">Accuracy: 100%</div>
    <div class="stat" id="progress">Progress: 0%</div>
    <div class="stat" id="timer">Time: 0s</div>
  </div>
  <div class="controls">
    <button id="restart">New Set</button>
    <button id="finish" class="secondary">Finish Early</button>
  </div>
 </div>
 <div id="overlay"></div>
 <script>
 const sentences=[
  'Focus builds legendary skill.',
  'Every key fuels momentum.',
  'Precision today becomes mastery tomorrow.',
  'Calm rhythm beats frantic speed.',
  'Your determination inspires others.',
  'Consistency compounds quietly into greatness.',
  'Effort transforms into elite performance.',
  'You are writing your improvement story.',
  'Progress loves patience and practice.',
  'Small gains create huge results.'
 ];
 let target=''; let index=0; let started=false; let correct=0; let mistakes=0; let startTime=0; let finished=false;
 const textEl=document.getElementById('text'); const input=document.getElementById('input');
 function build(){ target = sentences.sort(()=>Math.random()-.5).slice(0,5).join(' '); textEl.innerHTML=''; [...target].forEach((ch,i)=>{ const span=document.createElement('span'); span.textContent=ch; if(i===0) span.classList.add('active'); textEl.appendChild(span); }); index=0; correct=0; mistakes=0; started=false; finished=false; startTime=0; updateStats(); }
 function updateStats(){ const elapsed = started? (Date.now()-startTime)/1000 : 0; const wpm = elapsed>0? Math.round(((index/5)/elapsed)*60) : 0; const acc = index>0? Math.max(0, Math.round((correct/index)*100)) : 100; document.getElementById('wpm').textContent='WPM: '+wpm; document.getElementById('accuracy').textContent='Accuracy: '+acc+'%'; document.getElementById('progress').textContent='Progress: '+Math.round((index/target.length)*100)+'%'; document.getElementById('timer').textContent='Time: '+Math.floor(elapsed)+'s'; }
 function finish(){ finished=true; const elapsed=(Date.now()-startTime)/1000; const wpm = elapsed>0? Math.round(((index/5)/elapsed)*60) : 0; const acc = index>0? Math.max(0, Math.round((correct/index)*100)) : 100; overlay.innerHTML=`<div>SESSION COMPLETE</div><div style='font-size:1rem'>WPM ${wpm} ‚Ä¢ Acc ${acc}%</div>`; overlay.classList.add('show'); try{ window.parent.postMessage({type:'game_over',gameId:'monkeytyping',result:'completed',score:wpm,stats:{accuracy:acc}},'*'); }catch(e){} }
 input.addEventListener('input',()=>{ if(finished) return; const val=input.value; if(!started && val.length>0){ started=true; startTime=Date.now(); }
 while(index < val.length){ const expected = target[index]; const actual = val[index]; const spans = textEl.querySelectorAll('span'); spans[index].classList.remove('active'); if(actual===expected){ spans[index].classList.add('correct'); correct++; } else { spans[index].classList.add('incorrect'); mistakes++; }
 index++; if(index < spans.length) spans[index].classList.add('active'); else finish(); }
 updateStats(); });
 document.getElementById('restart').addEventListener('click',()=>{ input.value=''; overlay.classList.remove('show'); build(); input.focus(); });
 document.getElementById('finish').addEventListener('click',()=>{ if(!finished) finish(); });
 setInterval(()=>{ if(started && !finished) updateStats(); },500);
 const overlay=document.getElementById('overlay');
 build();
 </script>
</body>
</html>